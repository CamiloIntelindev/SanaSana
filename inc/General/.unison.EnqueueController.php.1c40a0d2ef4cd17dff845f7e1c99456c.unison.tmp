<?php
/**
* @package  Sanasana
 * Enqueues CSS and JS Files
 */

 namespace SanasanaInit\General;
 
 class EnqueueController extends BaseController
 {
     public function register()
     {
         add_action('wp_enqueue_scripts', [$this, 'enqueue_files']);
         add_action('admin_enqueue_scripts', [$this, 'enqueue_files']);
     }
 
     public function enqueue_files()
     {
        $this->version = '1.0.3';

        // Encolar Bootstrap CSS
        wp_enqueue_style('bootstrap-css', 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css', [], '5.3.0', 'all');
        // Encolar Bootstrap JS
        wp_enqueue_script('bootstrap-js', 'https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js', [], '5.3.0', true);

        // Encolar tus estilos y scripts personalizados
        wp_enqueue_style('pricetable-styles-css', $this->plugin_url . 'assets/css/styles-price.css', [], $this->version, 'all');
        wp_enqueue_style('tabstable-styles-css', $this->plugin_url . 'assets/css/styles-tabs.css', [], $this->version, 'all');
        wp_enqueue_style('questionnaire-styles-css', $this->plugin_url . 'assets/css/styles-questionnaire.css', [], $this->version, 'all');
        wp_enqueue_style('form-styles-css', $this->plugin_url . 'assets/css/form-styles.css', [], $this->version, 'all');
    
        wp_enqueue_script('jquery');
        wp_enqueue_script('jquery-ui-sortable');
        wp_enqueue_media();

        wp_enqueue_script('scripts-price', $this->plugin_url . 'assets/js/script-price.min.js', ['jquery'], $this->version, true);
        wp_enqueue_script('scripts-tabs', $this->plugin_url . 'assets/js/script-tabs.min.js', ['jquery'], $this->version, true);
        wp_enqueue_script('scripts-tabs-horizontal', $this->plugin_url . 'assets/js/script-tabs-horizontal.min.js', ['jquery'], $this->version, true);
        wp_enqueue_script('scripts-tabs-vertical', $this->plugin_url . 'assets/js/script-tabs-vertical.min.js', ['jquery'], $this->version, true);
        //wp_enqueue_script('scripts-questionnaire', $this->plugin_url . 'assets/js/script-questionnaire.min.js', ['jquery'], $this->version, true);
		wp_enqueue_script('script-general', $this->plugin_url . 'assets/js/script-general.js', ['jquery'], $this->version, true);
		 
		 
		//Swalert 2
		// Verificar URL actual
		$current_path = trim(parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH), '/');
		$allowed_paths = ['cuestionario', 'en/questionnaire'];

		if (in_array($current_path, $allowed_paths)) {
			// SweetAlert solo en las URLs de cuestionario
			wp_enqueue_script('sweetalert2', 'https://cdn.jsdelivr.net/npm/sweetalert2@11', [], null, true);
			wp_enqueue_style('sweetalert2', 'https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css');
		}

		 
		// International Telephone Input
		// https://intl-tel-input.com
		wp_enqueue_style('intl-tel-input', 'https://cdn.jsdelivr.net/npm/intl-tel-input@25.3.1/build/css/intlTelInput.css', [], '25.3.1');
	    wp_enqueue_script('intl-tel-input', 'https://cdn.jsdelivr.net/npm/intl-tel-input@25.3.1/build/js/intlTelInput.min.js', [], '25.3.1', true);
		 
     }
 }